
set  -g default-terminal "tmux-256color"
set -g base-index 1
set -g pane-base-index 1
set-window-option -g pane-base-index 1
set-option -g renumber-windows on

set -g status-keys vi
set -g mode-keys   vi


# rebind main key: C-a
unbind C-b
set -g prefix C-a
bind -N "Send the prefix key through to the application" \
  C-a send-prefix


set  -g mouse             on
set  -g focus-events      off
setw -g aggressive-resize off
setw -g clock-mode-style  24
set  -s escape-time       0
set  -g history-limit     10000

      # Terminal Settings
      set -g default-terminal "tmux-256color"
      set -ga terminal-overrides ",foot*:Tc,foot:RGB,xterm-256color:RGB"
      set -g escape-time 0

      # Pane spawning keeps current working dir
      bind -n M-n new-window -c "#{pane_current_path}"
      bind -n M-s split-window -c "#{pane_current_path}"
      bind -n M-v split-window -h -c "#{pane_current_path}"
      bind g display-popup -B -d "#{pane_current_path}" -xC -yC -w100% -h100% -E 'lazygit'

      # Kill pane quickly
      bind -n M-q kill-pane

      # Move panes around
      bind -n M-h select-pane -L
      bind -n M-j select-pane -D
      bind -n M-k select-pane -U
      bind -n M-l select-pane -R

      # Zoom toggle
      bind -n M-f resize-pane -Z
	  
	  # Pane resizing
	  bind -r Left  resize-pane -L
	  bind -r Down  resize-pane -D
	  bind -r Up    resize-pane -U
	  bind -r Right resize-pane -R

	  # Switch windows with Alt+Left/Right
	  bind -n M-Left  previous-window
	  bind -n M-Right next-window

      # Alt+num to switch windows
      bind -n M-1 select-window -t 1

bind -n M-2 select-window -t 2
bind -n M-3 select-window -t 3
bind -n M-4 select-window -t 4
bind -n M-5 select-window -t 5
bind -n M-6 select-window -t 6
bind -n M-7 select-window -t 7
bind -n M-8 select-window -t 8
bind -n M-9 select-window -t 9

# Prefix+num to attach to sessions
bind 1 attach-session -t 1
bind 2 attach-session -t 2
bind 3 attach-session -t 3
bind 4 attach-session -t 4
bind 5 attach-session -t 5
bind 6 attach-session -t 6
bind 7 attach-session -t 7
bind 8 attach-session -t 8
bind 9 attach-session -t 9

      # Copy-mode and mouse behavior
      bind -n M-c copy-mode
      unbind -T copy-mode MouseDragEnd1Pane
      bind -T copy-mode j send -X cursor-down
      bind -T copy-mode k send -X cursor-up
      bind -T copy-mode h send -X cursor-left
      bind -T copy-mode l send -X cursor-right
      bind -T copy-mode J send -X -N 12 scroll-down
      bind -T copy-mode K send -X -N 12 scroll-up
      bind -T copy-mode L send -X end-of-line
      bind -T copy-mode H send -X start-of-line
      bind -T copy-mode v send -X begin-selection
      bind -T copy-mode 'C-v' send -X begin-selection \; send -X rectangle-toggle
      bind -T copy-mode V send -X select-line
      bind -T copy-mode r send -X rectangle-toggle
      bind -T copy-mode y send -X copy-pipe-and-cancel "wl-copy"


# ======================
# KANAGAWA WAVE TMUX CONFIG
# ======================
set -g status-position top
set -g status-style "fg=#DCD7BA,bg=#1F1F28"
set -g pane-active-border-style "fg=#957FB8"  # Wave purple
set -g pane-border-style "fg=#54546D"         # Muted wave blue
set -g status-left-length 40
set -g status-right-length 200
set -g status-interval 5

##### Display Menu ##### 
bind m display-menu -T "#[align=centre fg=#C0A36E]Dotfiles" -x C -y C \
  ".zshrc"            z  "display-popup -E 'nvim ~/.zshrc'" \
  ".tmux.conf"        t  "display-popup -E 'nvim ~/.tmux.conf'" \
  "Exit"              q  ""

# Left status (wave-style capsule)
set -g status-left "#[fg=#957FB8,bg=default]#[fg=#1F1F28,bg=#957FB8]  #[fg=#957FB8,bg=default]"

# Window tabs (gold for active, purple for others)
set -g window-status-separator " "
set -g window-status-format "#[fg=#54546D,bg=default]#[fg=#DCD7BA,bg=#54546D] #I:#W #[fg=#54546D,bg=default]"
set -g window-status-current-format "#[fg=#C0A36E,bg=default]#[fg=#1F1F28,bg=#C0A36E] #I:#W #[fg=#C0A36E,bg=default]"

# Right status bar (wave flow)
set -g status-right "\
#[fg=#7E9CD8,bg=default]\
#[fg=#1F1F28,bg=#7E9CD8]  #(echo \"#{pane_current_path}\" | awk -F/ '{ if (NF<=2) print \$NF; else print \$(NF-1)\"/\"\$NF; }') \
#[fg=#7E9CD8,bg=#957FB8]#[fg=#1F1F28,bg=#957FB8]  \
#[fg=#957FB8,bg=#C0A36E]#[fg=#1F1F28,bg=#C0A36E] #(battery-status | awk '/charging/ {print \"󰂂 \" \$2; next} {print \$2}') \
#[fg=#C0A36E,bg=#D27E46]#[fg=#D27E46,bg=#E82424]\
#[fg=#1F1F28,bg=#E82424]  %H:%M \
#[fg=#E82424,bg=default]"

# Message styling
set -g message-style "fg=#1F1F28,bg=#C0A36E"
set -g message-command-style "fg=#DCD7BA,bg=#1F1F28"

# Clock mode
set -g clock-mode-colour "#957FB8"
set -g clock-mode-style 24