cmd image-ops ${{
    choice=$(echo -e "â†» Rotate 90Â°\nâ†º Rotate -90Â°\nğŸ”„ Flip horizontal\nğŸ”„ Flip vertical\nğŸ–¼ï¸ Convert to PNG\nğŸ“ Resize 50%\nğŸŒˆ Grayscale\nâœ‚ï¸ Crop (interactive)\nğŸ’§ Blur\nâœ¨ Sharpen\nğŸ“ Watermark\nğŸ“ Border\nCancel" | fzf --height=50% --reverse --prompt="Image operation: ")

    case "$choice" in
        "â†» Rotate 90Â°") magick "$f" -rotate 90 "$f" ;;
        "â†º Rotate -90Â°") magick "$f" -rotate -90 "$f" ;;
        "ğŸ”„ Flip horizontal") magick "$f" -flip "$f" ;;
        "ğŸ”„ Flip vertical") magick "$f" -flop "$f" ;;
        "ğŸ–¼ï¸ Convert to PNG") magick "$f" "${f%.*}.png" ;;
        "ğŸ“ Resize 50%") magick "$f" -resize 50% "$f" ;;
        "ğŸŒˆ Grayscale") magick "$f" -colorspace Gray "$f" ;;
        "âœ‚ï¸ Crop (interactive)") 
            geometry=$(magick "$f" -format "%wx%h+%x+%y" -write info: -crop 0x0+0+0 +repage - | fzf --prompt="Click+drag to crop | Enter to confirm: ")
            [ -n "$geometry" ] && magick "$f" -crop "$geometry" +repage "$f"
            ;;
        "ğŸ’§ Blur") magick "$f" -blur 0x8 "$f" ;;
        "âœ¨ Sharpen") magick "$f" -sharpen 0x1 "$f" ;;
				"ğŸŒ Brighten") magick "$f" -modulate 110 "$f" ;;
				"ğŸŒ‘ Darken") magick "$f" -modulate 90 "$f" ;;
        "ğŸ“ Watermark")
            echo "Enter watermark text:" && read watermark
            magick "$f" -pointsize 36 -fill "rgba(255,255,255,0.5)" -gravity southeast -annotate +10+10 "$watermark" "$f"
            ;;
        "ğŸ“ Border") magick "$f" -bordercolor black -border 10x10 "$f" ;;
        *) ;;
    esac
}}
