#!/bin/bash

declare -A URLS

URLS=(
  ["ğŸŒ Google"]="https://www.google.com/search?q="
  ["ğŸï¸ YouTube"]="https://www.youtube.com/results?search_query="
  ["ğŸŒŒ Reddit"]="https://www.reddit.com/search/?q="
  ["ğŸ“™ GitHub"]="https://github.com/search?q="
  ["ğŸ“œ Wikipedia"]="https://en.wikipedia.org/wiki/Special:Search?search="
  ["ğŸ“š MDN Web Docs"]="https://developer.mozilla.org/en-US/search?q="
)

# URL encode using jq
urlencode() {
  jq -nr --arg v "$1" '$v|@uri'
}

# Show search options using rofi
select_platform() {
  printf "%s\n" "${!URLS[@]}" | rofi -dmenu -p "Select search platform"
}

# Prompt for query
prompt_query() {
  rofi -dmenu -p "Enter your search query"
}

main() {
  platform=$(select_platform)
  [[ -z "$platform" ]] && exit 1

  query=$(prompt_query)
  [[ -z "$query" ]] && exit 1

  encoded_query=$(urlencode "$query")
  url="${URLS[$platform]}${encoded_query}"

  xdg-open "$url"
}

main

