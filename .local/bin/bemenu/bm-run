#!/usr/bin/env bash
# -----------------------------------------------
# bemenu-wrapper — Nightfox-themed bemenu launcher
# For both app launcher and custom scripts
# -----------------------------------------------

set -euo pipefail

# Get focused monitor index for sway (optional, safe fallback)
focused_monitor="$(swaymsg -t get_outputs -r | jq -r '.[] | select(.focused) | .name' 2>/dev/null || true)"
monitor_args=()
[ -n "$focused_monitor" ] && monitor_args=( -m "$focused_monitor" )


BEMENU_ARGS=(
  --center
  --list 15
  --line-height 28
  --margin 8
  --width-factor 0.5
  # Normal items
  --nb "#2e3440cc" --nf "#cdcecf"
  # Selected / focused item
  --sb "#81b29acc" --sf "#192330"
  # Hovered item
  --hb "#394b58cc" --hf "#e0def4"
  # Filter/input bar (top line)
  --fb "#2e3440cc" --ff "#cdcecf"
  # Alternating items
  --ab "#2e3440cc" --af "#cdcecf"
)

# Run mode: "dmenu" → application launcher, otherwise → read from stdin
if [[ "${1:-}" == "dmenu" ]]; then
  bemenu-run "${BEMENU_ARGS[@]}"
else
  bemenu "${BEMENU_ARGS[@]}"
fi
